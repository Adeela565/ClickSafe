{% extends "base.html" %}
{% block content %}
<h2>Launch Email Campaign</h2>

<form method="post">
	<div style="margin: 0.5rem 0;">
		<label>Campaign Name</label><br/>
		<input name="campaign_name" placeholder="e.g., Demo Campaign" required style="width: 420px;">
	</div>

	<div style="margin: 0.5rem 0;">
		<label>Subject</label><br/>
		<input name="subject" placeholder="Subject line" required style="width: 420px;">
	</div>

	<label for="email_template">Select Email Template:</label>
	<select name="email_template" id="email_template" required>
		<option value="microsoft_unusual_signin">Microsoft Sign-in Alert</option>
		<option value="rbc_password_disabled">RBC â€“ Password Disabled</option>
	</select>

	<fieldset style="margin: 0.5rem 0; padding: 0.5rem; border:1px solid #ddd;">
		<legend>Recipients</legend>
		<label><input type="checkbox" name="use_all"> Send to all recipients</label>
		<div style="max-height: 180px; overflow:auto; border:1px solid #eee; padding:0.5rem; margin-top:0.5rem;">
			{% for r in recipients %}
				<div>
					<label>
						<input type="checkbox" name="recipients" value={{ r.id }}">
						{{ r.email }} {% if r.name %} ({{ r.name }}) {% endif %}
					</label>
				</div>
			{% else %}
				<em>No recipients yet. Add some in the database.</em>
			{% endfor %}
		</div>
	</fieldset>

	<div style="margin-top:10px;">
		<button type="submit"
			style="background:#007bff;
				color:white;
				border:none;
				border-radius:4px;
				padding:6px 12px;
				cursor:pointer;
				font-size:14px;">
			Send Campaign
		</button>
		
		<a href="{{ url_for('main.results') }}"
			style="display:inline-block;
				padding:5px 10px;
				background:#007bff;
				color:white;
				text-decoration:none;
				border:1px solid #007bff;
				border-radius:4px;
				font-size:14px;
				margin-left:8px;
				cursor:pointer;">
			View Campaign Results
		</a>
	</div>
</form>
{% endblock %}
